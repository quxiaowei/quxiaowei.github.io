<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>A.Smith</title><base href=https://quxiaowei.github.io><link rel="shortcut icon" href=/img/favicon-compact.svg type=image/x-icon><link href=https://quxiaowei.github.io/index.xml rel=alternate type=application/rss+xml title="A CodeSmith"><link rel=stylesheet href=https://quxiaowei.github.io/css/bootstrap.min.css><link rel=stylesheet href=https://quxiaowei.github.io/css/styles.css><link rel=stylesheet href=https://quxiaowei.github.io/css/post.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lobster"><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><script src=./script/site.js></script></head><body><div class="column container"><header class=header><a href=/ class=title>A.Smith</a></header><section id=main class=col-md-12><header class=post-header><p class=post-title>Bilibili 视频抓取脚本</p></header><article itemprop=articleBody id=content><p>周末写了个zsh脚本，从B站上下载《不能结婚的男人》，贴上代码。</p><pre><code>for i in {1..12}
do
    url=http://www.bilibili.com/video/av3794937/index_$i.html
    echo $url
    youtube-dl -o &quot;SeGmEnT-$i-%(playlist_index)s.%(ext)s&quot; $url
    rm -f buffer_list
    touch buffer_list
    for file in $(ls SeGmEnT-$i-*.flv)
    do
        echo file &quot;'$file'&quot; &gt;&gt; buffer_list
    done
    ffmpeg -f concat -i buffer_list -c copy $i.mkv 
done
rm -f buffer_list
</code></pre><p>『 終 』</p><p>2016-5-24</p></article></section><footer class=bottom-footer></footer><script>renderMathInElement(document.getElementById('main'));</script></div><a href=javascript: id=return-to-top><i class=icon-chevron-up></i></a><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet></body></html>